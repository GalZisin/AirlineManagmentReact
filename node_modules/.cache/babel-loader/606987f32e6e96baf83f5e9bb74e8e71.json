{"ast":null,"code":"var _jsxFileName = \"C:\\\\Projects\\\\react-flights\\\\src\\\\components\\\\SearchResults.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { addPostAction, addPostIdAction } from '../actions/posts.action';\nimport Moment from 'moment';\nimport '../components/SearchResultBox.css';\nimport { Button, Container, Row, Col } from 'react-bootstrap';\nimport SelectedFlightModal from './SelectedFlightModal';\nimport Swal from \"sweetalert2\";\nimport axios from 'axios';\nimport { BaseUrl } from '../constants/BaseUrl';\n\nclass SearchResults extends Component {\n  constructor(props) {\n    super(props);\n\n    this.ModalItem = index => {\n      localStorage.setItem('postId', index);\n      let token = '';\n      let url = '';\n      let adminToken = localStorage.getItem('admin');\n      let customerToken = localStorage.getItem('customer');\n      let companyToken = localStorage.getItem('airlineCompany');\n\n      if (adminToken !== null && adminToken !== '') {\n        token = adminToken;\n        url = '/api/AdministratorFacade/getAdministratorFirstName';\n      } else if (customerToken !== null && customerToken !== '') {\n        token = customerToken;\n        url = '/api/CustomerFacade/getCustomerFirstName';\n      } else if (companyToken !== null && companyToken !== '') {\n        token = companyToken;\n        url = '/api/AirlineCompanyFacade/getAirlineCompanyName';\n      } else {\n        url = '/api/CustomerFacade/getCustomerFirstName';\n      }\n\n      const instance = axios.create({\n        baseURL: BaseUrl.url,\n        headers: {\n          'Authorization': 'Bearer ' + token\n        }\n      });\n      instance.post(url).then(res => {\n        if (res.data !== '') {\n          this.setState({\n            requiredItem: index\n          });\n          this.setState({\n            isOpen: true\n          });\n          this.props.addPostIdAction(this.state.requiredItem);\n        }\n      }).catch(error => {\n        if (error.message === 'Request failed with status code 401') {\n          Swal.fire({\n            icon: 'warning',\n            title: \"Oops..\",\n            text: \"Please log-in to continue with your purchase!\"\n          });\n        }\n      });\n    };\n\n    this.state = {\n      requiredItem: 0,\n      isOpen: false,\n      isSelectModalOpen: true\n    };\n    this.ModalItem = this.ModalItem.bind(this);\n  }\n\n  componentDidMount() {\n    this.props.addPostAction(0);\n  }\n\n  render() {\n    console.log(\"postsData: \" + JSON.stringify(this.props.postsData));\n    const {\n      posts\n    } = this.props.postsData;\n    const postList = posts.length ? posts.map((post, index) => {\n      Moment.locale('en');\n      let dtd1 = post.f1.REAL_DEPARTURE_TIME;\n      let dtl1 = post.f1.REAL_LANDING_TIME;\n      let dtd2 = post.f2.REAL_DEPARTURE_TIME;\n      let dtl2 = post.f2.REAL_LANDING_TIME;\n      const now1 = Moment(dtd1);\n      const expiration1 = Moment(dtl1);\n      const diff1 = expiration1.diff(now1);\n      const now2 = Moment(dtd2);\n      const expiration2 = Moment(dtl2);\n      const diff2 = expiration2.diff(now2);\n\n      if (posts.length < 0) {\n        this.setState({\n          isSelectModalOpen: false\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"card container mt-2 mb-3 p-5\",\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"card-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(Col, {\n        sm: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: require(`../../public/images/${post.f1.AIRLINE_NAME}.jpg`),\n        alt: \"company\",\n        style: {\n          width: '100px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      })), React.createElement(Col, {\n        sm: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, post.f1.O_COUNTRY_NAME), React.createElement(\"h6\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \" \", Moment(dtd1).format('MMMM dddd Do YYYY, HH:mm:ss'))), React.createElement(Col, {\n        sm: 1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fas fa-plane\",\n        style: {\n          fontSize: 40,\n          color: 'lightseagreen'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      })), React.createElement(Col, {\n        sm: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, post.f1.D_COUNTRY_NAME), React.createElement(\"h6\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, Moment(dtl1).format('MMMM dddd Do YYYY, HH:mm:ss')), \" \"), React.createElement(Col, {\n        sm: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"h6\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"Flight\"), React.createElement(\"h6\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"duration: \"), React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, Moment(diff1).format('HH:mm')))), React.createElement(Row, {\n        style: {\n          marginTop: 25,\n          marginBottom: 25\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(Col, {\n        md: 10,\n        xs: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"hr\", {\n        style: {\n          color: 'black',\n          height: 2,\n          backgroundColor: 'black'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      })), React.createElement(Col, {\n        md: 2,\n        xs: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \"  \", this.state.isSelectModalOpen && React.createElement(Button, {\n        variant: \"warning\",\n        size: \"lg\",\n        onClick: () => this.ModalItem(index),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"far fa-hand-point-left\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }), \"\\xA0Select\"))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(Col, {\n        sm: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: require(`../../public/images/${post.f2.AIRLINE_NAME}.jpg`),\n        alt: \"company\",\n        style: {\n          width: '100px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      })), React.createElement(Col, {\n        sm: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, \" \", React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, post.f2.O_COUNTRY_NAME), React.createElement(\"h6\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \" \", Moment(dtd2).format('MMMM dddd Do YYYY, HH:mm:ss'))), React.createElement(Col, {\n        sm: 1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fas fa-plane\",\n        style: {\n          fontSize: 45,\n          color: 'lightseagreen'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      })), React.createElement(Col, {\n        sm: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, post.f2.D_COUNTRY_NAME), React.createElement(\"h6\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, Moment(dtl2).format('MMMM dddd Do YYYY, HH:mm:ss'))), React.createElement(Col, {\n        sm: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"h6\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"Flight\"), React.createElement(\"h6\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"duration: \"), React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, Moment(diff2).format('HH:mm')))))));\n    }) : React.createElement(\"div\", {\n      className: \"cardNoPosts\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, \"No posts to show\");\n    const requiredItem = this.state.requiredItem;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, postList), React.createElement(SelectedFlightModal, {\n      show: this.state.isOpen,\n      onHide: () => this.setState({\n        isOpen: false\n      }),\n      indexofpost: requiredItem,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  console.log(\"mapStateToProps: state= \" + JSON.stringify(state.posts));\n  return {\n    postsData: state.postsData\n  };\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    addPostAction,\n    addPostIdAction\n  }, dispatch); // addPostAction: bindActionCreators(addPostAction, dispatch),\n  // addPostIdAction: bindActionCreators(addPostIdAction, dispatch),\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchResults);","map":{"version":3,"sources":["C:/Projects/react-flights/src/components/SearchResults.js"],"names":["React","Component","connect","bindActionCreators","addPostAction","addPostIdAction","Moment","Button","Container","Row","Col","SelectedFlightModal","Swal","axios","BaseUrl","SearchResults","constructor","props","ModalItem","index","localStorage","setItem","token","url","adminToken","getItem","customerToken","companyToken","instance","create","baseURL","headers","post","then","res","data","setState","requiredItem","isOpen","state","catch","error","message","fire","icon","title","text","isSelectModalOpen","bind","componentDidMount","render","console","log","JSON","stringify","postsData","posts","postList","length","map","locale","dtd1","f1","REAL_DEPARTURE_TIME","dtl1","REAL_LANDING_TIME","dtd2","f2","dtl2","now1","expiration1","diff1","diff","now2","expiration2","diff2","require","AIRLINE_NAME","width","O_COUNTRY_NAME","format","fontSize","color","D_COUNTRY_NAME","marginTop","marginBottom","height","backgroundColor","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators } from 'redux'\r\nimport { addPostAction,  addPostIdAction } from '../actions/posts.action'\r\nimport Moment from 'moment';\r\nimport '../components/SearchResultBox.css';\r\nimport { Button, Container, Row, Col } from 'react-bootstrap';\r\nimport SelectedFlightModal from './SelectedFlightModal';\r\nimport Swal from \"sweetalert2\";\r\nimport axios from 'axios';\r\nimport { BaseUrl } from '../constants/BaseUrl'\r\nclass SearchResults extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      requiredItem: 0,\r\n      isOpen: false,\r\n      isSelectModalOpen: true\r\n\r\n    }\r\n    this.ModalItem = this.ModalItem.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.addPostAction(0);\r\n  }\r\n\r\n  ModalItem = (index) => {\r\n    localStorage.setItem('postId', index)\r\n    let token = '';\r\n    let url = '';\r\n    let adminToken = localStorage.getItem('admin');\r\n    let customerToken = localStorage.getItem('customer');\r\n    let companyToken = localStorage.getItem('airlineCompany');\r\n\r\n    if (adminToken !== null && adminToken !== '') {\r\n      token = adminToken;\r\n      url = '/api/AdministratorFacade/getAdministratorFirstName';\r\n    }\r\n    else if (customerToken !== null && customerToken !== '') {\r\n      token = customerToken;\r\n      url = '/api/CustomerFacade/getCustomerFirstName';\r\n    }\r\n    else if (companyToken !== null && companyToken !== '') {\r\n      token = companyToken\r\n      url = '/api/AirlineCompanyFacade/getAirlineCompanyName';\r\n    }\r\n    else {\r\n      url = '/api/CustomerFacade/getCustomerFirstName';\r\n    }\r\n\r\n    const instance = axios.create({\r\n      baseURL: BaseUrl.url, headers: { 'Authorization': 'Bearer ' + token }\r\n    });\r\n\r\n    instance.post(url)\r\n      .then(res => {\r\n        if (res.data !== '') {\r\n          this.setState({ requiredItem: index });\r\n          this.setState({ isOpen: true })\r\n\r\n          this.props.addPostIdAction(this.state.requiredItem);\r\n        }\r\n      })\r\n      .catch(error => {\r\n        if (error.message === 'Request failed with status code 401') {\r\n          Swal.fire({\r\n            icon: 'warning',\r\n            title: \"Oops..\",\r\n            text: \"Please log-in to continue with your purchase!\"\r\n          });\r\n\r\n        }\r\n      })\r\n  }\r\n\r\n  render() {\r\n    console.log(\"postsData: \" + JSON.stringify(this.props.postsData))\r\n\r\n    const { posts } = this.props.postsData\r\n\r\n    const postList = posts.length ? (\r\n      posts.map((post, index) => {\r\n        Moment.locale('en');\r\n        let dtd1 = post.f1.REAL_DEPARTURE_TIME;\r\n        let dtl1 = post.f1.REAL_LANDING_TIME;\r\n        let dtd2 = post.f2.REAL_DEPARTURE_TIME;\r\n        let dtl2 = post.f2.REAL_LANDING_TIME;\r\n        const now1 = Moment(dtd1);\r\n        const expiration1 = Moment(dtl1);\r\n        const diff1 = expiration1.diff(now1);\r\n        const now2 = Moment(dtd2);\r\n        const expiration2 = Moment(dtl2);\r\n        const diff2 = expiration2.diff(now2);\r\n      \r\n        if (posts.length < 0) {\r\n          this.setState({ isSelectModalOpen: false })\r\n        }\r\n\r\n        return (\r\n\r\n          <div className=\"card container mt-2 mb-3 p-5\" key={index}>\r\n            <div className=\"card-body\">\r\n              <Container>\r\n                <Row>\r\n                  <Col sm={2}><img src={require(`../../public/images/${post.f1.AIRLINE_NAME}.jpg`)} alt=\"company\" style={{ width: '100px' }} /></Col>\r\n                  <Col sm={3}><h3>{post.f1.O_COUNTRY_NAME}</h3>\r\n                    <h6> {Moment(dtd1).format('MMMM dddd Do YYYY, HH:mm:ss')}</h6></Col>\r\n                  <Col sm={1}><i className='fas fa-plane' style={{ fontSize: 40, color: 'lightseagreen' }}></i></Col>\r\n                  <Col sm={3}><h3>{post.f1.D_COUNTRY_NAME}</h3>\r\n                    <h6>{Moment(dtl1).format('MMMM dddd Do YYYY, HH:mm:ss')}</h6> </Col>\r\n                  <Col sm={2}><h6>Flight</h6><h6>duration: </h6>\r\n                    <h5>{Moment(diff1).format('HH:mm')}</h5></Col>\r\n                </Row>\r\n\r\n                <Row style={{ marginTop: 25, marginBottom: 25 }}>\r\n                  <Col md={10} xs={6}><hr style={{ color: 'black', height: 2, backgroundColor: 'black' }} /></Col>\r\n                  {/* <Link to={'/posts/' + keyId}> */}\r\n                  <Col md={2} xs={6}>  {this.state.isSelectModalOpen && <Button variant=\"warning\" size=\"lg\" onClick={() => this.ModalItem(index)}><i className=\"far fa-hand-point-left\"></i>&nbsp;Select</Button>}</Col>\r\n                  {/* </Link> */}\r\n                </Row>\r\n\r\n                <Row>\r\n                  <Col sm={2}><img src={require(`../../public/images/${post.f2.AIRLINE_NAME}.jpg`)} alt=\"company\" style={{ width: '100px' }} /></Col>\r\n                  <Col sm={3}> <h3>{post.f2.O_COUNTRY_NAME}</h3>\r\n                    <h6> {Moment(dtd2).format('MMMM dddd Do YYYY, HH:mm:ss')}</h6></Col>\r\n                  <Col sm={1}><i className='fas fa-plane' style={{ fontSize: 45, color: 'lightseagreen' }}></i></Col>\r\n                  <Col sm={3}><h3>{post.f2.D_COUNTRY_NAME}</h3>\r\n                    <h6>{Moment(dtl2).format('MMMM dddd Do YYYY, HH:mm:ss')}</h6></Col>\r\n                  <Col sm={2}><h6>Flight</h6><h6>duration: </h6>\r\n                    <h5>{Moment(diff2).format('HH:mm')}</h5></Col>\r\n                </Row>\r\n\r\n              </Container>\r\n            </div>\r\n          </div>\r\n        );\r\n\r\n      })\r\n    ) : (\r\n        <div className=\"cardNoPosts\">No posts to show</div>\r\n      )\r\n\r\n    const requiredItem = this.state.requiredItem;\r\n\r\n    return (\r\n      <div>\r\n        <div className=\"container\">\r\n          {postList}\r\n        </div>\r\n        <SelectedFlightModal\r\n          show={this.state.isOpen}\r\n          onHide={() => this.setState({ isOpen: false })}\r\n          indexofpost={requiredItem}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\r\n  console.log(\"mapStateToProps: state= \" + JSON.stringify(state.posts));\r\n\r\n  return {\r\n    postsData: state.postsData\r\n\r\n  }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return  bindActionCreators({addPostAction, addPostIdAction}, dispatch)\r\n    // addPostAction: bindActionCreators(addPostAction, dispatch),\r\n    // addPostIdAction: bindActionCreators(addPostIdAction, dispatch),\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchResults);"]},"metadata":{},"sourceType":"module"}