{"ast":null,"code":"var _jsxFileName = \"C:\\\\Projects\\\\react-flights\\\\src\\\\components\\\\pages\\\\AirlineCompanyAccount\\\\AirlineCompanyPages\\\\CompanyDetails.js\";\nimport React from 'react';\nimport { Button } from 'react-bootstrap';\nimport axios from 'axios';\nimport { connect } from 'react-redux';\nimport { history } from '../../../../history';\nimport { logout } from '../../../../actions/user.actions';\nimport { bindActionCreators } from 'redux';\nimport Swal from \"sweetalert2\";\nimport '../../TableList.css';\nimport { Table, Thead, Tbody, Tr, Th, Td } from 'react-super-responsive-table';\nimport '../../../../../node_modules/react-super-responsive-table/dist/SuperResponsiveTableStyle.css';\nimport { BaseUrl } from '../../../../constants/BaseUrl';\n\nclass CompanyDetails extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.deleteCompany = companyId => {\n      Swal.fire({\n        title: 'Are you sure?',\n        text: \"You won't be able to revert this!\",\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: 'Yes, delete it!'\n      }).then(result => {\n        if (result.value) {\n          let token = localStorage.getItem('airlineCompany');\n          this.props.logout();\n          axios.delete(BaseUrl.url + '/api/AirlineCompanyFacade/deletecompany/' + companyId, {\n            headers: {\n              'Authorization': 'Bearer ' + token\n            }\n          }).then(result => {\n            if (result.data === `Airline Company with ID = ${companyId} deleted succsesfully`) {\n              Swal.fire('Deleted!', result.data, 'success'); // this.setState({\n              //     response: result\n              // });\n\n              history.push('/');\n            } else {\n              Swal.fire({\n                icon: 'warning',\n                title: \"Oops..\",\n                text: result.data\n              });\n            }\n          });\n        }\n      });\n    };\n\n    this.state = {\n      error: null,\n      company: {},\n      response: {},\n      companyId: ''\n    };\n  }\n\n  componentDidMount() {\n    let token = localStorage.getItem('airlineCompany');\n    const instance = axios.create({\n      baseURL: BaseUrl.url + '/api/AirlineCompanyFacade',\n      headers: {\n        'Authorization': 'Bearer ' + token\n      }\n    });\n    instance.get('/getAirlineCompany').then(result => {\n      this.setState({\n        company: result.data\n      });\n      console.log(\"getAirlineCompany\" + JSON.stringify(result.data));\n    }, error => {\n      this.setState({\n        error\n      });\n\n      if (error.message === 'Request failed with status code 401') {\n        this.props.logout();\n        Swal.fire({\n          icon: 'warning',\n          title: \"Oops..\",\n          text: \"Your token expires, please re-login!\"\n        });\n        history.push('/');\n      }\n    });\n  }\n\n  render() {\n    const {\n      error,\n      company\n    } = this.state;\n\n    if (error) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"Error:\", error.message);\n    } else {\n      return React.createElement(Table, {\n        className: \"tableWidth tableViews\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(Thead, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(Tr, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(Th, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, \"# ID\"), React.createElement(Th, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"Company Name\"), React.createElement(Th, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, \"User Name\"), React.createElement(Th, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \"Password\"), React.createElement(Th, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, \"Country Code\"), React.createElement(Th, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"Action\"))), React.createElement(Tbody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(Tr, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(Td, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, company.ID), React.createElement(Td, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, company.AIRLINE_NAME), React.createElement(Td, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, company.USER_NAME), React.createElement(Td, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, company.PASSWORD), React.createElement(Td, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, company.COUNTRY_CODE), React.createElement(Td, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"info\",\n        style: {\n          borderRadius: 0\n        },\n        onClick: () => this.props.editCompany(company.ID),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \"Edit\"), \"  \\xA0\\xA0\\xA0\", React.createElement(Button, {\n        variant: \"danger\",\n        style: {\n          borderRadius: 0\n        },\n        onClick: () => this.deleteCompany(company.ID),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, \"Delete\")))));\n    }\n  }\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    logout: bindActionCreators(logout, dispatch)\n  };\n}\n\nexport default connect(null, mapDispatchToProps)(CompanyDetails);","map":{"version":3,"sources":["C:/Projects/react-flights/src/components/pages/AirlineCompanyAccount/AirlineCompanyPages/CompanyDetails.js"],"names":["React","Button","axios","connect","history","logout","bindActionCreators","Swal","Table","Thead","Tbody","Tr","Th","Td","BaseUrl","CompanyDetails","Component","constructor","props","deleteCompany","companyId","fire","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","value","token","localStorage","getItem","delete","url","headers","data","push","state","error","company","response","componentDidMount","instance","create","baseURL","get","setState","console","log","JSON","stringify","message","render","ID","AIRLINE_NAME","USER_NAME","PASSWORD","COUNTRY_CODE","borderRadius","editCompany","mapDispatchToProps","dispatch"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,MAAT,QAAuB,iBAAvB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,OAAT,QAAwB,qBAAxB;AACA,SAASC,MAAT,QAAuB,kCAAvB;AACA,SAASC,kBAAT,QAAmC,OAAnC;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,OAAO,qBAAP;AACA,SAASC,KAAT,EAAgBC,KAAhB,EAAuBC,KAAvB,EAA8BC,EAA9B,EAAkCC,EAAlC,EAAsCC,EAAtC,QAAgD,8BAAhD;AACA,OAAO,6FAAP;AACA,SAASC,OAAT,QAAwB,+BAAxB;;AAEA,MAAMC,cAAN,SAA6Bf,KAAK,CAACgB,SAAnC,CAA6C;AACzCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SA2CnBC,aA3CmB,GA2CFC,SAAD,IAAe;AAE3Bb,MAAAA,IAAI,CAACc,IAAL,CAAU;AACNC,QAAAA,KAAK,EAAE,eADD;AAENC,QAAAA,IAAI,EAAE,mCAFA;AAGNC,QAAAA,IAAI,EAAE,SAHA;AAINC,QAAAA,gBAAgB,EAAE,IAJZ;AAKNC,QAAAA,kBAAkB,EAAE,SALd;AAMNC,QAAAA,iBAAiB,EAAE,MANb;AAONC,QAAAA,iBAAiB,EAAE;AAPb,OAAV,EAQGC,IARH,CAQSC,MAAD,IAAY;AAChB,YAAIA,MAAM,CAACC,KAAX,EAAkB;AACd,cAAIC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,gBAArB,CAAZ;AACA,eAAKhB,KAAL,CAAWb,MAAX;AACAH,UAAAA,KAAK,CAACiC,MAAN,CAAarB,OAAO,CAACsB,GAAR,GAAc,0CAAd,GAA2DhB,SAAxE,EAAmF;AAAEiB,YAAAA,OAAO,EAAE;AAAE,+BAAiB,YAAYL;AAA/B;AAAX,WAAnF,EACKH,IADL,CACUC,MAAM,IAAI;AACZ,gBAAIA,MAAM,CAACQ,IAAP,KAAiB,6BAA4BlB,SAAU,uBAA3D,EAAmF;AAC/Eb,cAAAA,IAAI,CAACc,IAAL,CACI,UADJ,EAEIS,MAAM,CAACQ,IAFX,EAGI,SAHJ,EAD+E,CAM/E;AACA;AACA;;AACAlC,cAAAA,OAAO,CAACmC,IAAR,CAAa,GAAb;AACH,aAVD,MAWK;AACDhC,cAAAA,IAAI,CAACc,IAAL,CAAU;AACNG,gBAAAA,IAAI,EAAE,SADA;AAENF,gBAAAA,KAAK,EAAE,QAFD;AAGNC,gBAAAA,IAAI,EAAEO,MAAM,CAACQ;AAHP,eAAV;AAKH;AACJ,WApBL;AAqBH;AACJ,OAlCD;AAmCH,KAhFkB;;AAEf,SAAKE,KAAL,GAAa;AACTC,MAAAA,KAAK,EAAE,IADE;AAETC,MAAAA,OAAO,EAAE,EAFA;AAGTC,MAAAA,QAAQ,EAAE,EAHD;AAITvB,MAAAA,SAAS,EAAE;AAJF,KAAb;AAMH;;AAEDwB,EAAAA,iBAAiB,GAAG;AAEhB,QAAIZ,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,gBAArB,CAAZ;AAEA,UAAMW,QAAQ,GAAG3C,KAAK,CAAC4C,MAAN,CAAa;AAC1BC,MAAAA,OAAO,EAAEjC,OAAO,CAACsB,GAAR,GAAc,2BADG;AAC0BC,MAAAA,OAAO,EAAE;AAAE,yBAAiB,YAAYL;AAA/B;AADnC,KAAb,CAAjB;AAIAa,IAAAA,QAAQ,CAACG,GAAT,CAAa,oBAAb,EACKnB,IADL,CAESC,MAAD,IAAY;AACR,WAAKmB,QAAL,CAAc;AACVP,QAAAA,OAAO,EAAEZ,MAAM,CAACQ;AADN,OAAd;AAIAY,MAAAA,OAAO,CAACC,GAAR,CAAY,sBAAsBC,IAAI,CAACC,SAAL,CAAevB,MAAM,CAACQ,IAAtB,CAAlC;AACH,KART,EASSG,KAAD,IAAW;AACP,WAAKQ,QAAL,CAAc;AAAER,QAAAA;AAAF,OAAd;;AACA,UAAIA,KAAK,CAACa,OAAN,KAAkB,qCAAtB,EAA6D;AACzD,aAAKpC,KAAL,CAAWb,MAAX;AACAE,QAAAA,IAAI,CAACc,IAAL,CAAU;AACNG,UAAAA,IAAI,EAAE,SADA;AAENF,UAAAA,KAAK,EAAE,QAFD;AAGNC,UAAAA,IAAI,EAAE;AAHA,SAAV;AAKAnB,QAAAA,OAAO,CAACmC,IAAR,CAAa,GAAb;AACH;AACJ,KApBT;AAsBH;;AA0CDgB,EAAAA,MAAM,GAAG;AACL,UAAM;AAAEd,MAAAA,KAAF;AAASC,MAAAA;AAAT,QAAqB,KAAKF,KAAhC;;AAEA,QAAIC,KAAJ,EAAW;AACP,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAYA,KAAK,CAACa,OAAlB,CADJ;AAGH,KAJD,MAKK;AACD,aAGI,oBAAC,KAAD;AAAO,QAAA,SAAS,EAAC,uBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,EAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,EAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,EAEI,oBAAC,EAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFJ,EAGI,oBAAC,EAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAHJ,EAII,oBAAC,EAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAJJ,EAKI,oBAAC,EAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBALJ,EAMI,oBAAC,EAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBANJ,CADJ,CADJ,EAWI,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,EAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,EAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKZ,OAAO,CAACc,EAAb,CADJ,EAEI,oBAAC,EAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKd,OAAO,CAACe,YAAb,CAFJ,EAGI,oBAAC,EAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKf,OAAO,CAACgB,SAAb,CAHJ,EAII,oBAAC,EAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKhB,OAAO,CAACiB,QAAb,CAJJ,EAKI,oBAAC,EAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKjB,OAAO,CAACkB,YAAb,CALJ,EAMI,oBAAC,EAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAC,MAAhB;AAAuB,QAAA,KAAK,EAAE;AAAEC,UAAAA,YAAY,EAAE;AAAhB,SAA9B;AAAmD,QAAA,OAAO,EAAE,MAAM,KAAK3C,KAAL,CAAW4C,WAAX,CAAuBpB,OAAO,CAACc,EAA/B,CAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAJ,oBACH,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAC,QAAhB;AAAyB,QAAA,KAAK,EAAE;AAAEK,UAAAA,YAAY,EAAE;AAAhB,SAAhC;AAAqD,QAAA,OAAO,EAAE,MAAM,KAAK1C,aAAL,CAAmBuB,OAAO,CAACc,EAA3B,CAApE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADG,CANJ,CADJ,CAXJ,CAHJ;AA8BH;AACJ;;AA3HwC;;AA8H7C,SAASO,kBAAT,CAA4BC,QAA5B,EAAsC;AAClC,SAAO;AACH3D,IAAAA,MAAM,EAAEC,kBAAkB,CAACD,MAAD,EAAS2D,QAAT;AADvB,GAAP;AAGH;;AACD,eAAe7D,OAAO,CAAC,IAAD,EAAO4D,kBAAP,CAAP,CAAkChD,cAAlC,CAAf","sourcesContent":["import React from 'react';\r\nimport { Button } from 'react-bootstrap';\r\nimport axios from 'axios';\r\nimport { connect } from 'react-redux';\r\nimport { history } from '../../../../history';\r\nimport { logout } from '../../../../actions/user.actions';\r\nimport { bindActionCreators } from 'redux'\r\nimport Swal from \"sweetalert2\";\r\nimport '../../TableList.css'\r\nimport { Table, Thead, Tbody, Tr, Th, Td } from 'react-super-responsive-table'\r\nimport '../../../../../node_modules/react-super-responsive-table/dist/SuperResponsiveTableStyle.css'\r\nimport { BaseUrl } from '../../../../constants/BaseUrl'\r\n\r\nclass CompanyDetails extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            error: null,\r\n            company: {},\r\n            response: {},\r\n            companyId: ''\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        let token = localStorage.getItem('airlineCompany');\r\n\r\n        const instance = axios.create({\r\n            baseURL: BaseUrl.url + '/api/AirlineCompanyFacade', headers: { 'Authorization': 'Bearer ' + token }\r\n        });\r\n\r\n        instance.get('/getAirlineCompany')\r\n            .then(\r\n                (result) => {\r\n                    this.setState({\r\n                        company: result.data\r\n                    });\r\n\r\n                    console.log(\"getAirlineCompany\" + JSON.stringify(result.data))\r\n                },\r\n                (error) => {\r\n                    this.setState({ error });\r\n                    if (error.message === 'Request failed with status code 401') {\r\n                        this.props.logout();\r\n                        Swal.fire({\r\n                            icon: 'warning',\r\n                            title: \"Oops..\",\r\n                            text: \"Your token expires, please re-login!\",\r\n                        });\r\n                        history.push('/');\r\n                    }\r\n                }\r\n            )\r\n    }\r\n\r\n\r\n    deleteCompany = (companyId) => {\r\n\r\n        Swal.fire({\r\n            title: 'Are you sure?',\r\n            text: \"You won't be able to revert this!\",\r\n            icon: 'warning',\r\n            showCancelButton: true,\r\n            confirmButtonColor: '#3085d6',\r\n            cancelButtonColor: '#d33',\r\n            confirmButtonText: 'Yes, delete it!'\r\n        }).then((result) => {\r\n            if (result.value) {\r\n                let token = localStorage.getItem('airlineCompany');\r\n                this.props.logout();\r\n                axios.delete(BaseUrl.url + '/api/AirlineCompanyFacade/deletecompany/' + companyId, { headers: { 'Authorization': 'Bearer ' + token } })\r\n                    .then(result => {\r\n                        if (result.data === `Airline Company with ID = ${companyId} deleted succsesfully`) {\r\n                            Swal.fire(\r\n                                'Deleted!',\r\n                                result.data,\r\n                                'success'\r\n                            )\r\n                            // this.setState({\r\n                            //     response: result\r\n                            // });\r\n                            history.push('/');\r\n                        }\r\n                        else {\r\n                            Swal.fire({\r\n                                icon: 'warning',\r\n                                title: \"Oops..\",\r\n                                text: result.data\r\n                            });\r\n                        }\r\n                    });\r\n            }\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const { error, company } = this.state;\r\n\r\n        if (error) {\r\n            return (\r\n                <div>Error:{error.message}</div>\r\n            )\r\n        }\r\n        else {\r\n            return (\r\n\r\n\r\n                <Table className='tableWidth tableViews'>\r\n                    <Thead>\r\n                        <Tr>\r\n                            <Th># ID</Th>\r\n                            <Th>Company Name</Th>\r\n                            <Th>User Name</Th>\r\n                            <Th>Password</Th>\r\n                            <Th>Country Code</Th>\r\n                            <Th>Action</Th>\r\n                        </Tr>\r\n                    </Thead>\r\n                    <Tbody>\r\n                        <Tr>\r\n                            <Td>{company.ID}</Td>\r\n                            <Td>{company.AIRLINE_NAME}</Td>\r\n                            <Td>{company.USER_NAME}</Td>\r\n                            <Td>{company.PASSWORD}</Td>\r\n                            <Td>{company.COUNTRY_CODE}</Td>\r\n                            <Td><Button variant=\"info\" style={{ borderRadius: 0 }} onClick={() => this.props.editCompany(company.ID)}>Edit</Button>  &nbsp;&nbsp;&nbsp;\r\n                         <Button variant=\"danger\" style={{ borderRadius: 0 }} onClick={() => this.deleteCompany(company.ID)}>Delete</Button></Td>\r\n                        </Tr>\r\n                    </Tbody>\r\n                </Table>\r\n\r\n\r\n\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        logout: bindActionCreators(logout, dispatch),\r\n    }\r\n}\r\nexport default connect(null, mapDispatchToProps)(CompanyDetails);\r\n\r\n"]},"metadata":{},"sourceType":"module"}