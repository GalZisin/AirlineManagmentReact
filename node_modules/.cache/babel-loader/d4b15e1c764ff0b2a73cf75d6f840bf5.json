{"ast":null,"code":"var _jsxFileName = \"C:\\\\Projects\\\\react-flights\\\\src\\\\components\\\\pages\\\\PurchchseTicket\\\\FlightView.js\";\nimport React, { Component } from \"react\";\nimport { Card, ListGroup, Row, Col } from 'react-bootstrap';\nimport './FlightView.css';\nimport Moment from 'moment';\nimport { connect } from 'react-redux';\nimport { addPostAction, addPostIdAction } from '../../../actions/posts.action';\nimport { bindActionCreators } from 'redux';\n\nclass FlightView extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      f1: {},\n      f2: {},\n      posts: null,\n      postId: 0\n    };\n    let postsJson = localStorage.getItem('posts');\n    let posts = JSON.parse(postsJson);\n    this.state.posts = posts;\n    let postIdJson = localStorage.getItem('postId');\n    let postId = JSON.parse(postIdJson);\n    this.state.postId = postId;\n\n    if (this.props.postsData.posts.length === 0 && posts !== null) {\n      this.props.addPostAction(this.state.posts);\n      this.props.addPostIdAction(this.state.postId);\n    }\n  }\n\n  componentDidMount() {\n    setTimeout(function () {\n      //Start the timer\n      this.getFromRedux(); //After 100 miliseconds execute func\n    }.bind(this), 100);\n  }\n\n  getFromRedux() {\n    if (this.props.postsData.posts.length > 0) {\n      this.setState({\n        f1: this.props.postsData.posts[this.props.postId.postId].f1\n      });\n      this.setState({\n        f2: this.props.postsData.posts[this.props.postId.postId].f2\n      });\n    }\n  }\n\n  render() {\n    // const { dispatch, ...rest } = this.props\n    Moment.locale('en');\n    let dtd1 = this.state.f1.REAL_DEPARTURE_TIME;\n    console.log(\"dtd1: \" + dtd1);\n    let dtl1 = this.state.f1.REAL_LANDING_TIME;\n    let dtd2 = this.state.f2.REAL_DEPARTURE_TIME;\n    let dtl2 = this.state.f2.REAL_LANDING_TIME; // const now1 = Moment(dtd1);\n    // const expiration1 = Moment(dtl1);\n    // const diff1 = expiration1.diff(now1);\n    // const now2 = Moment(dtd2);\n    // const expiration2 = Moment(dtl2);\n    // const diff2 = expiration2.diff(now2);\n\n    return React.createElement(\"div\", {\n      className: \"marginTop\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(Card, {\n      className: \"cardStyle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, React.createElement(Card.Header, {\n      className: \"cardHeader\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, \"Reservation Summary\"), React.createElement(Card.Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, \"Flight\\xA0\\xA0\", React.createElement(\"i\", {\n      className: \"fas fa-plane\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    })), React.createElement(ListGroup, {\n      className: \"cardBodyStyle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(Col, {\n      sm: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"Outbound flight:\\xA0\\xA0\", Moment(dtd1).format('ddd. DD/MM')))), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: 3,\n      sm: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: process.env.PUBLIC_URL + `/images/${this.state.f1.AIRLINE_NAME}.jpg`,\n      alt: \"company\",\n      style: {\n        width: '100px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    })), React.createElement(Col, {\n      xs: 3,\n      sm: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, this.state.f1.O_COUNTRY_NAME), React.createElement(\"p\", {\n      style: {\n        marginTop: -20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, Moment(dtd1).format('HH:mm'))), React.createElement(Col, {\n      xs: 3,\n      sm: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    })), React.createElement(Col, {\n      xs: 3,\n      sm: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, this.state.f1.D_COUNTRY_NAME), React.createElement(\"p\", {\n      style: {\n        marginTop: -20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, Moment(dtl1).format('HH:mm')))), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(Col, {\n      sm: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }))), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(Col, {\n      sm: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \"Return flight:\\xA0\\xA0\", Moment(dtd2).format('ddd. DD/MM')))), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: 3,\n      sm: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: process.env.PUBLIC_URL + `/images/${this.state.f2.AIRLINE_NAME}.jpg`,\n      alt: \"company\",\n      style: {\n        width: '100px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    })), React.createElement(Col, {\n      xs: 3,\n      sm: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, this.state.f2.O_COUNTRY_NAME), React.createElement(\"p\", {\n      style: {\n        marginTop: -20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, Moment(dtd2).format('HH:mm'))), React.createElement(Col, {\n      xs: 3,\n      sm: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    })), React.createElement(Col, {\n      xs: 3,\n      sm: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, this.state.f2.D_COUNTRY_NAME), React.createElement(\"p\", {\n      style: {\n        marginTop: -20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, Moment(dtl2).format('HH:mm')))))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  console.log(\"mapStateToProps  state FlightView: \" + JSON.stringify(state));\n  return {\n    postsData: state.postsData,\n    postId: state.postId\n  };\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    addPostAction,\n    addPostIdAction\n  }, dispatch);\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FlightView);","map":{"version":3,"sources":["C:/Projects/react-flights/src/components/pages/PurchchseTicket/FlightView.js"],"names":["React","Component","Card","ListGroup","Row","Col","Moment","connect","addPostAction","addPostIdAction","bindActionCreators","FlightView","constructor","props","state","f1","f2","posts","postId","postsJson","localStorage","getItem","JSON","parse","postIdJson","postsData","length","componentDidMount","setTimeout","getFromRedux","bind","setState","render","locale","dtd1","REAL_DEPARTURE_TIME","console","log","dtl1","REAL_LANDING_TIME","dtd2","dtl2","format","process","env","PUBLIC_URL","AIRLINE_NAME","width","O_COUNTRY_NAME","marginTop","D_COUNTRY_NAME","mapStateToProps","stringify","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Card, ListGroup, Row, Col } from 'react-bootstrap'\r\nimport './FlightView.css'\r\nimport Moment from 'moment';\r\nimport { connect } from 'react-redux';\r\nimport { addPostAction, addPostIdAction } from '../../../actions/posts.action'\r\nimport { bindActionCreators } from 'redux'\r\n\r\nclass FlightView extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            f1: {},\r\n            f2: {},\r\n            posts: null,\r\n            postId: 0\r\n        }\r\n        let postsJson = localStorage.getItem('posts');\r\n        let posts = JSON.parse(postsJson);\r\n        this.state.posts = posts;\r\n\r\n        let postIdJson = localStorage.getItem('postId');\r\n        let postId = JSON.parse(postIdJson);\r\n        this.state.postId = postId;\r\n\r\n        if (this.props.postsData.posts.length === 0 && posts !== null) {\r\n            this.props.addPostAction(this.state.posts);\r\n            this.props.addPostIdAction(this.state.postId);\r\n        }\r\n    }\r\n    componentDidMount() {\r\n\r\n        setTimeout(function () { //Start the timer\r\n            this.getFromRedux();  //After 100 miliseconds execute func\r\n        }.bind(this), 100)\r\n    }\r\n    getFromRedux() {\r\n        if (this.props.postsData.posts.length > 0) {\r\n            this.setState({ f1: this.props.postsData.posts[this.props.postId.postId].f1 })\r\n            this.setState({ f2: this.props.postsData.posts[this.props.postId.postId].f2 })\r\n        }\r\n    }\r\n    render() {\r\n        // const { dispatch, ...rest } = this.props\r\n        Moment.locale('en');\r\n        let dtd1 = this.state.f1.REAL_DEPARTURE_TIME;\r\n        console.log(\"dtd1: \" + dtd1)\r\n        let dtl1 = this.state.f1.REAL_LANDING_TIME;\r\n        let dtd2 = this.state.f2.REAL_DEPARTURE_TIME;\r\n        let dtl2 = this.state.f2.REAL_LANDING_TIME;\r\n        // const now1 = Moment(dtd1);\r\n        // const expiration1 = Moment(dtl1);\r\n        // const diff1 = expiration1.diff(now1);\r\n        // const now2 = Moment(dtd2);\r\n        // const expiration2 = Moment(dtl2);\r\n        // const diff2 = expiration2.diff(now2);\r\n        return (\r\n            <div className=\"marginTop\">\r\n\r\n                <Card className=\"cardStyle\">\r\n                    <Card.Header className=\"cardHeader\">Reservation Summary</Card.Header>\r\n                    <Card.Header>Flight&nbsp;&nbsp;<i className=\"fas fa-plane\"></i></Card.Header>\r\n\r\n                    <ListGroup className=\"cardBodyStyle\">\r\n\r\n                        <Row>\r\n                            <Col sm><p>Outbound flight:&nbsp;&nbsp;{Moment(dtd1).format('ddd. DD/MM')}</p></Col>\r\n                        </Row>\r\n\r\n                        <Row>\r\n                            <Col xs={3} sm={3}><img src={process.env.PUBLIC_URL + `/images/${this.state.f1.AIRLINE_NAME}.jpg`} alt=\"company\" style={{ width: '100px' }} /></Col>\r\n                            <Col xs={3} sm={3}><p>{this.state.f1.O_COUNTRY_NAME}</p><p style={{ marginTop: -20 }}>{Moment(dtd1).format('HH:mm')}</p></Col>\r\n                            <Col xs={3} sm={3}><hr></hr></Col>\r\n                            <Col xs={3} sm={3}><p>{this.state.f1.D_COUNTRY_NAME}</p><p style={{ marginTop: -20 }}>{Moment(dtl1).format('HH:mm')}</p></Col>\r\n                        </Row>\r\n\r\n                        <Row>\r\n                            <Col sm><hr></hr></Col>\r\n                        </Row>\r\n\r\n                        <Row>\r\n                            <Col sm><p>Return flight:&nbsp;&nbsp;{Moment(dtd2).format('ddd. DD/MM')}</p></Col>\r\n                        </Row>\r\n\r\n                        <Row>\r\n                            <Col xs={3} sm={3}><img src={process.env.PUBLIC_URL + `/images/${this.state.f2.AIRLINE_NAME}.jpg`} alt=\"company\" style={{ width: '100px' }} /></Col>\r\n                            <Col xs={3} sm={3}><p>{this.state.f2.O_COUNTRY_NAME}</p><p style={{ marginTop: -20 }}>{Moment(dtd2).format('HH:mm')}</p></Col>\r\n                            <Col xs={3} sm={3}><hr></hr></Col>\r\n                            <Col xs={3} sm={3}><p>{this.state.f2.D_COUNTRY_NAME}</p><p style={{ marginTop: -20 }}>{Moment(dtl2).format('HH:mm')}</p></Col>\r\n                        </Row>\r\n\r\n                    </ListGroup>\r\n                </Card>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = (state) => {\r\n    console.log(\"mapStateToProps  state FlightView: \" + JSON.stringify(state))\r\n    return {\r\n        postsData: state.postsData,\r\n        postId: state.postId\r\n    }\r\n}\r\nfunction mapDispatchToProps(dispatch) {\r\n    return bindActionCreators({ addPostAction, addPostIdAction }, dispatch)\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(FlightView);"]},"metadata":{},"sourceType":"module"}