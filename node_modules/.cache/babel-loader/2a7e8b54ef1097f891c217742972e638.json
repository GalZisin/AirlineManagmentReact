{"ast":null,"code":"var _jsxFileName = \"C:\\\\Projects\\\\react-flights\\\\src\\\\components\\\\pages\\\\CustomerAccount\\\\customerPages\\\\TicketDetails.js\";\nimport React from 'react';\nimport { Button } from 'react-bootstrap';\nimport axios from 'axios';\nimport Moment from 'moment';\nimport '../../TableList.css';\nimport { Table, Thead, Tbody, Tr, Th, Td } from 'react-super-responsive-table';\nimport '../../../../../node_modules/react-super-responsive-table/dist/SuperResponsiveTableStyle.css';\nimport Swal from \"sweetalert2\";\nimport { history } from '../../../../history';\nimport { logout } from '../../../../actions/user.actions';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport '../../../../../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport { BaseUrl } from '../../../../constants/BaseUrl';\n\nclass TicketDetailes extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getAllTicketsByCustomerId = customerId => {\n      let token = localStorage.getItem('customer');\n      axios.get(BaseUrl.url + '/api/CustomerFacade/getAllTicketsByCustomerId/' + customerId, {\n        headers: {\n          'Authorization': 'Bearer ' + token\n        }\n      }).then(result => {\n        this.setState({\n          tickets: result.data\n        });\n      }, error => {\n        this.setState({\n          error\n        });\n\n        if (error.message === 'Request failed with status code 401') {\n          this.props.logout();\n          Swal.fire({\n            icon: 'warning',\n            title: \"Oops..\",\n            type: \"error\",\n            text: \"Your token expires, please re-login!\"\n          });\n          history.push('/');\n        }\n      });\n    };\n\n    this.state = {\n      error: null,\n      tickets: [],\n      response: {},\n      customerId: ''\n    };\n  }\n\n  componentDidMount() {\n    let token = localStorage.getItem('customer');\n    const instance = axios.create({\n      baseURL: BaseUrl.url + '/api/CustomerFacade',\n      headers: {\n        'Authorization': 'Bearer ' + token\n      }\n    });\n    instance.get('/getCustomerId').then(result => {\n      this.setState({\n        customerId: result.data\n      });\n      this.getAllTicketsByCustomerId(this.state.customerId);\n      console.log(\"getCustomeryId  id:\" + this.state.companyId);\n    }, error => {\n      this.setState({\n        error\n      });\n\n      if (error.message === 'Request failed with status code 401') {\n        this.props.logout();\n        Swal.fire({\n          icon: 'warning',\n          title: \"Oops..\",\n          type: \"error\",\n          text: \"Your token expires, please re-login!\"\n        });\n        history.push('/');\n      }\n    });\n  }\n\n  deleteTicket(ticketId) {\n    if (window.confirm('Are you sure to delete this record?')) {\n      let token = localStorage.getItem('customer');\n      const {\n        tickets\n      } = this.state;\n      axios.delete(BaseUrl.url + '/api/CustomerFacade/deleteticket/' + ticketId, {\n        headers: {\n          'Authorization': 'Bearer ' + token\n        }\n      }).then(result => {\n        alert(result.data);\n        this.setState({\n          response: result,\n          tickets: tickets.filter(ticket => ticket.ID !== ticketId)\n        });\n      });\n    }\n  }\n\n  render() {\n    const {\n      error,\n      tickets\n    } = this.state;\n\n    if (error) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, \"Error:\", error.message);\n    } else {\n      return React.createElement(Table, {\n        className: \"tableWidth tableFixHead tableViews\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(Thead, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(Tr, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(Th, {\n        className: \"ticketIDWidth\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \"Ticket ID\"), React.createElement(Th, {\n        className: \"ticketFIDWidth\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, \"Flight ID\"), React.createElement(Th, {\n        className: \"ticketFNWidth\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"Flight number\"), React.createElement(Th, {\n        className: \"ticketCNWidth\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"Company\"), React.createElement(Th, {\n        className: \"ticketIDWidth\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"Origin country\"), React.createElement(Th, {\n        className: \"ticketDTimeWidth\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \"Departure date\"), React.createElement(Th, {\n        className: \"ticketDCWidth\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, \"Destination country\"), React.createElement(Th, {\n        className: \"ticketATimeWidth\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, \"Arrival Date\"), React.createElement(Th, {\n        className: \"ticketCIDWidth\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, \"Customer ID\"), React.createElement(Th, {\n        className: \"ticketFNDWidth\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, \"Customer first name\"), React.createElement(Th, {\n        className: \"ticketLNDWidth\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, \"Customer last name\"), React.createElement(Th, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, \"Action\"))), React.createElement(Tbody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, tickets.map(ticket => React.createElement(Tr, {\n        key: ticket.ID,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(Td, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, ticket.ID), React.createElement(Td, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, ticket.FLIGHT_ID), React.createElement(Td, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, ticket.FLIGHT_NUMBER), React.createElement(Td, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, ticket.AIRLINE_NAME), React.createElement(Td, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, ticket.O_COUNTRY_NAME), React.createElement(Td, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, Moment(ticket.DEPARTURE_TIME).format('MMM dddd Do YYYY, HH:mm')), React.createElement(Td, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, ticket.D_COUNTRY_NAME), React.createElement(Td, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, Moment(ticket.LANDING_TIME).format('MMM dddd Do YYYY, HH:mm')), React.createElement(Td, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, ticket.CUSTOMER_ID), React.createElement(Td, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, ticket.FIRST_NAME), React.createElement(Td, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, ticket.LAST_NAME), React.createElement(Td, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"info\",\n        style: {\n          borderRadius: 0\n        },\n        onClick: () => this.props.editTicket(ticket.ID),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, \"Edit\"))))));\n    }\n  }\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    logout: bindActionCreators(logout, dispatch)\n  };\n}\n\nexport default connect(null, mapDispatchToProps)(TicketDetailes);","map":{"version":3,"sources":["C:/Projects/react-flights/src/components/pages/CustomerAccount/customerPages/TicketDetails.js"],"names":["React","Button","axios","Moment","Table","Thead","Tbody","Tr","Th","Td","Swal","history","logout","bindActionCreators","connect","BaseUrl","TicketDetailes","Component","constructor","props","getAllTicketsByCustomerId","customerId","token","localStorage","getItem","get","url","headers","then","result","setState","tickets","data","error","message","fire","icon","title","type","text","push","state","response","componentDidMount","instance","create","baseURL","console","log","companyId","deleteTicket","ticketId","window","confirm","delete","alert","filter","ticket","ID","render","map","FLIGHT_ID","FLIGHT_NUMBER","AIRLINE_NAME","O_COUNTRY_NAME","DEPARTURE_TIME","format","D_COUNTRY_NAME","LANDING_TIME","CUSTOMER_ID","FIRST_NAME","LAST_NAME","borderRadius","editTicket","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Button } from 'react-bootstrap';\r\nimport axios from 'axios';\r\nimport Moment from 'moment';\r\nimport '../../TableList.css'\r\nimport { Table, Thead, Tbody, Tr, Th, Td } from 'react-super-responsive-table'\r\nimport '../../../../../node_modules/react-super-responsive-table/dist/SuperResponsiveTableStyle.css'\r\nimport Swal from \"sweetalert2\";\r\nimport { history } from '../../../../history';\r\nimport { logout } from '../../../../actions/user.actions';\r\nimport { bindActionCreators } from 'redux'\r\nimport { connect } from 'react-redux';\r\nimport '../../../../../node_modules/bootstrap/dist/css/bootstrap.min.css';\r\nimport { BaseUrl } from '../../../../constants/BaseUrl'\r\n\r\nclass TicketDetailes extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      error: null,\r\n      tickets: [],\r\n      response: {},\r\n      customerId: ''\r\n\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n\r\n    let token = localStorage.getItem('customer');\r\n\r\n\r\n    const instance = axios.create({\r\n      baseURL: BaseUrl.url + '/api/CustomerFacade', headers: { 'Authorization': 'Bearer ' + token }\r\n    });\r\n\r\n    instance.get('/getCustomerId')\r\n      .then((result) => {\r\n        this.setState({\r\n          customerId: result.data\r\n        });\r\n        this.getAllTicketsByCustomerId(this.state.customerId)\r\n        console.log(\"getCustomeryId  id:\" + this.state.companyId)\r\n      },\r\n        (error) => {\r\n          this.setState({ error });\r\n          if (error.message === 'Request failed with status code 401') {\r\n            this.props.logout();\r\n            Swal.fire({\r\n              icon: 'warning',\r\n              title: \"Oops..\",\r\n              type: \"error\",\r\n              text: \"Your token expires, please re-login!\",\r\n            });\r\n            history.push('/');\r\n          }\r\n        }\r\n      )\r\n  }\r\n\r\n  getAllTicketsByCustomerId = (customerId) => {\r\n    let token = localStorage.getItem('customer');\r\n    axios.get(BaseUrl.url + '/api/CustomerFacade/getAllTicketsByCustomerId/' + customerId, { headers: { 'Authorization': 'Bearer ' + token } })\r\n      .then(\r\n        (result) => {\r\n          this.setState({\r\n            tickets: result.data\r\n          });\r\n        },\r\n        (error) => {\r\n          this.setState({ error });\r\n          if (error.message === 'Request failed with status code 401') {\r\n            this.props.logout();\r\n            Swal.fire({\r\n              icon: 'warning',\r\n              title: \"Oops..\",\r\n              type: \"error\",\r\n              text: \"Your token expires, please re-login!\",\r\n            });\r\n            history.push('/');\r\n          }\r\n        }\r\n      )\r\n  }\r\n\r\n  deleteTicket(ticketId) {\r\n    if (window.confirm('Are you sure to delete this record?')) {\r\n      let token = localStorage.getItem('customer');\r\n      const { tickets } = this.state;\r\n      axios.delete(BaseUrl.url + '/api/CustomerFacade/deleteticket/' + ticketId, { headers: { 'Authorization': 'Bearer ' + token } })\r\n        .then(result => {\r\n          alert(result.data);\r\n          this.setState({\r\n            response: result,\r\n            tickets: tickets.filter(ticket => ticket.ID !== ticketId)\r\n          });\r\n        });\r\n    }\r\n\r\n  }\r\n\r\n  render() {\r\n    const { error, tickets } = this.state;\r\n    if (error) {\r\n      return (\r\n        <div>Error:{error.message}</div>\r\n      )\r\n    }\r\n    else {\r\n      return (\r\n\r\n        <Table className='tableWidth tableFixHead tableViews'>\r\n          <Thead>\r\n            <Tr>\r\n              <Th className=\"ticketIDWidth\">Ticket ID</Th>\r\n              <Th className=\"ticketFIDWidth\">Flight ID</Th>\r\n              <Th className=\"ticketFNWidth\">Flight number</Th>\r\n              <Th className=\"ticketCNWidth\">Company</Th>\r\n              <Th className=\"ticketIDWidth\">Origin country</Th>\r\n              <Th className=\"ticketDTimeWidth\" >Departure date</Th>\r\n              <Th className=\"ticketDCWidth\">Destination country</Th>\r\n              <Th className=\"ticketATimeWidth\">Arrival Date</Th>\r\n              <Th className=\"ticketCIDWidth\">Customer ID</Th>\r\n              <Th className=\"ticketFNDWidth\">Customer first name</Th>\r\n              <Th className=\"ticketLNDWidth\">Customer last name</Th>\r\n              <Th>Action</Th>\r\n            </Tr>\r\n          </Thead>\r\n          <Tbody>\r\n            {tickets.map(ticket => (\r\n              <Tr key={ticket.ID} >\r\n                <Td>{ticket.ID}</Td>\r\n                <Td>{ticket.FLIGHT_ID}</Td>\r\n                <Td>{ticket.FLIGHT_NUMBER}</Td>\r\n                <Td>{ticket.AIRLINE_NAME}</Td>\r\n                <Td>{ticket.O_COUNTRY_NAME}</Td>\r\n                <Td>{Moment(ticket.DEPARTURE_TIME).format('MMM dddd Do YYYY, HH:mm')}</Td>\r\n                <Td>{ticket.D_COUNTRY_NAME}</Td>\r\n                <Td>{Moment(ticket.LANDING_TIME).format('MMM dddd Do YYYY, HH:mm')}</Td>\r\n                <Td>{ticket.CUSTOMER_ID}</Td>\r\n                <Td>{ticket.FIRST_NAME}</Td>\r\n                <Td>{ticket.LAST_NAME}</Td>\r\n\r\n                <Td><Button variant=\"info\" style={{ borderRadius: 0 }} onClick={() => this.props.editTicket(ticket.ID)}>Edit</Button>\r\n                  {/* &nbsp;&nbsp;&nbsp; */}\r\n                  {/* <Button variant=\"danger\" style={{ borderRadius: 0 }} onClick={() => this.deleteTicket(ticket.ID)}>Delete</Button> */}\r\n                </Td>\r\n\r\n              </Tr>\r\n\r\n            ))}\r\n\r\n          </Tbody>\r\n        </Table>\r\n\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {\r\n    logout: bindActionCreators(logout, dispatch),\r\n  }\r\n}\r\nexport default connect(null, mapDispatchToProps)(TicketDetailes);\r\n"]},"metadata":{},"sourceType":"module"}