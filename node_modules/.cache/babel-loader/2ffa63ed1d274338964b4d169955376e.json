{"ast":null,"code":"var _jsxFileName = \"C:\\\\Projects\\\\react-flights\\\\src\\\\components\\\\pages\\\\AirlineCompanyAccount\\\\AirlineCompanyPages\\\\ActionsOnCompany.js\";\nimport React, { Component } from 'react';\nimport { Container } from 'react-bootstrap';\nimport CompanyDetails from './CompanyDetails';\nimport EditCompany from './EditCompany';\nimport axios from 'axios';\nimport { logout } from '../../../../actions/user.actions';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { history } from '../../../../history';\nimport Swal from \"sweetalert2\";\nimport '../../../../../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport '../../../SecondaryMenu.css';\nimport { BaseUrl } from '../../../../constants/BaseUrl';\n\nclass ActionsOnCompany extends Component {\n  constructor(props) {\n    super(props);\n\n    this.editCompany = companyId => {\n      let token = localStorage.getItem('airlineCompany');\n      axios.get(BaseUrl.url + '/api/AirlineCompanyFacade/getAirlineCompanyByAirlineId/' + companyId, {\n        headers: {\n          'Authorization': 'Bearer ' + token\n        }\n      }).then(result => {\n        this.setState({\n          isEditCompany: true,\n          companyData: result.data\n        });\n      }, error => {\n        this.setState({\n          error\n        });\n\n        if (error.message === 'Request failed with status code 401') {\n          this.props.logout();\n          Swal.fire({\n            icon: 'warning',\n            title: \"Oops..\",\n            type: \"error\",\n            text: \"Your token expires, please re-login!\"\n          });\n          history.push('/');\n        }\n      });\n    };\n\n    this.state = {\n      error: null,\n      response: {},\n      companyData: {},\n      isEditCompany: false\n    };\n    this.onFormSubmit = this.onFormSubmit.bind(this);\n  }\n\n  onFormSubmit(data) {\n    let token = localStorage.getItem('airlineCompany');\n    axios.put(BaseUrl.url + '/api/AirlineCompanyFacade/updateairlinecompany', data, {\n      headers: {\n        'Authorization': 'Bearer ' + token\n      }\n    }).then(result => {\n      let cdata = JSON.parse(result.config.data);\n\n      if (cdata.ID === data.ID) {\n        Swal.fire({\n          position: 'center',\n          icon: 'success',\n          title: `Airline Company with ID = ${cdata.ID} updated succsesfully`,\n          showConfirmButton: true\n        });\n      } else {\n        Swal.fire({\n          icon: 'warning',\n          title: \"Oops..\",\n          text: result.data\n        });\n      }\n\n      console.log(\"str token: \" + result.data);\n      localStorage.setItem('airlineCompany', result.data);\n      this.setState({\n        response: result,\n        isEditCompany: false\n      });\n    });\n  }\n\n  onDetails(view) {\n    if (view === 'ListView') this.setState({\n      isEditCompany: false\n    });\n  }\n\n  render() {\n    console.log(\"isEditCompany: \" + this.state.isEditCompany);\n    let companyForm;\n\n    if (this.state.isEditCompany) {\n      companyForm = React.createElement(EditCompany, {\n        onFormSubmit: this.onFormSubmit,\n        company: this.state.companyData,\n        ListView: this.onDetails.bind(this, 'ListView'),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      className: \"content1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      style: {\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"Your Company Details\"), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }), !this.state.isEditCompany && React.createElement(CompanyDetails, {\n      editCompany: this.editCompany,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }), companyForm));\n  }\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    logout: bindActionCreators(logout, dispatch)\n  };\n}\n\nexport default connect(null, mapDispatchToProps)(ActionsOnCompany);","map":{"version":3,"sources":["C:/Projects/react-flights/src/components/pages/AirlineCompanyAccount/AirlineCompanyPages/ActionsOnCompany.js"],"names":["React","Component","Container","CompanyDetails","EditCompany","axios","logout","bindActionCreators","connect","history","Swal","BaseUrl","ActionsOnCompany","constructor","props","editCompany","companyId","token","localStorage","getItem","get","url","headers","then","result","setState","isEditCompany","companyData","data","error","message","fire","icon","title","type","text","push","state","response","onFormSubmit","bind","put","cdata","JSON","parse","config","ID","position","showConfirmButton","console","log","setItem","onDetails","view","render","companyForm","textAlign","mapDispatchToProps","dispatch"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,SAAT,QAA0B,iBAA1B;AACA,OAAOC,cAAP,MAA2B,kBAA3B;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,MAAT,QAAuB,kCAAvB;AACA,SAASC,kBAAT,QAAmC,OAAnC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,OAAT,QAAwB,qBAAxB;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,OAAO,kEAAP;AACA,OAAO,4BAAP;AACA,SAASC,OAAT,QAAwB,+BAAxB;;AAEA,MAAMC,gBAAN,SAA+BX,SAA/B,CAAyC;AACrCY,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SA4CnBC,WA5CmB,GA4CLC,SAAS,IAAI;AAEvB,UAAIC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,gBAArB,CAAZ;AACAd,MAAAA,KAAK,CAACe,GAAN,CAAUT,OAAO,CAACU,GAAR,GAAc,yDAAd,GAA0EL,SAApF,EAA+F;AAAEM,QAAAA,OAAO,EAAE;AAAE,2BAAiB,YAAYL;AAA/B;AAAX,OAA/F,EACKM,IADL,CACWC,MAAD,IAAY;AACd,aAAKC,QAAL,CAAc;AACVC,UAAAA,aAAa,EAAE,IADL;AAEVC,UAAAA,WAAW,EAAEH,MAAM,CAACI;AAFV,SAAd;AAIH,OANL,EAOSC,KAAD,IAAW;AACP,aAAKJ,QAAL,CAAc;AAAEI,UAAAA;AAAF,SAAd;;AACA,YAAIA,KAAK,CAACC,OAAN,KAAkB,qCAAtB,EAA6D;AACzD,eAAKhB,KAAL,CAAWR,MAAX;AACAI,UAAAA,IAAI,CAACqB,IAAL,CAAU;AACNC,YAAAA,IAAI,EAAE,SADA;AAENC,YAAAA,KAAK,EAAE,QAFD;AAGNC,YAAAA,IAAI,EAAE,OAHA;AAINC,YAAAA,IAAI,EAAE;AAJA,WAAV;AAMA1B,UAAAA,OAAO,CAAC2B,IAAR,CAAa,GAAb;AACH;AACJ,OAnBT;AAqBH,KApEkB;;AAGf,SAAKC,KAAL,GAAa;AACTR,MAAAA,KAAK,EAAE,IADE;AAETS,MAAAA,QAAQ,EAAE,EAFD;AAGTX,MAAAA,WAAW,EAAE,EAHJ;AAITD,MAAAA,aAAa,EAAE;AAJN,KAAb;AAMA,SAAKa,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;AACH;;AAEDD,EAAAA,YAAY,CAACX,IAAD,EAAO;AAEf,QAAIX,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,gBAArB,CAAZ;AACAd,IAAAA,KAAK,CAACoC,GAAN,CAAU9B,OAAO,CAACU,GAAR,GAAc,gDAAxB,EAA0EO,IAA1E,EAAgF;AAAEN,MAAAA,OAAO,EAAE;AAAE,yBAAiB,YAAYL;AAA/B;AAAX,KAAhF,EACKM,IADL,CACUC,MAAM,IAAI;AACZ,UAAIkB,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWpB,MAAM,CAACqB,MAAP,CAAcjB,IAAzB,CAAZ;;AACA,UAAIc,KAAK,CAACI,EAAN,KAAalB,IAAI,CAACkB,EAAtB,EAA0B;AACtBpC,QAAAA,IAAI,CAACqB,IAAL,CAAU;AACNgB,UAAAA,QAAQ,EAAE,QADJ;AAENf,UAAAA,IAAI,EAAE,SAFA;AAGNC,UAAAA,KAAK,EAAG,6BAA4BS,KAAK,CAACI,EAAG,uBAHvC;AAINE,UAAAA,iBAAiB,EAAE;AAJb,SAAV;AAMH,OAPD,MAQK;AACDtC,QAAAA,IAAI,CAACqB,IAAL,CAAU;AACNC,UAAAA,IAAI,EAAE,SADA;AAENC,UAAAA,KAAK,EAAE,QAFD;AAGNE,UAAAA,IAAI,EAAEX,MAAM,CAACI;AAHP,SAAV;AAKH;;AACDqB,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAgB1B,MAAM,CAACI,IAAnC;AAEAV,MAAAA,YAAY,CAACiC,OAAb,CAAqB,gBAArB,EAAuC3B,MAAM,CAACI,IAA9C;AACA,WAAKH,QAAL,CAAc;AACVa,QAAAA,QAAQ,EAAEd,MADA;AAEVE,QAAAA,aAAa,EAAE;AAFL,OAAd;AAKH,KA1BL;AA2BH;;AA4BD0B,EAAAA,SAAS,CAACC,IAAD,EAAO;AACZ,QAAIA,IAAI,KAAK,UAAb,EACI,KAAK5B,QAAL,CAAc;AAAEC,MAAAA,aAAa,EAAE;AAAjB,KAAd;AACP;;AAED4B,EAAAA,MAAM,GAAG;AACLL,IAAAA,OAAO,CAACC,GAAR,CAAY,oBAAoB,KAAKb,KAAL,CAAWX,aAA3C;AACA,QAAI6B,WAAJ;;AACA,QAAI,KAAKlB,KAAL,CAAWX,aAAf,EAA8B;AAE1B6B,MAAAA,WAAW,GAAG,oBAAC,WAAD;AAAa,QAAA,YAAY,EAAE,KAAKhB,YAAhC;AAA8C,QAAA,OAAO,EAAE,KAAKF,KAAL,CAAWV,WAAlE;AAA+E,QAAA,QAAQ,EAAE,KAAKyB,SAAL,CAAeZ,IAAf,CAAoB,IAApB,EAA0B,UAA1B,CAAzF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAd;AAEH;;AAGD,WACI;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAI,MAAA,KAAK,EAAE;AAAEgB,QAAAA,SAAS,EAAE;AAAb,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,EAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJJ,EAKK,CAAC,KAAKnB,KAAL,CAAWX,aAAZ,IAA6B,oBAAC,cAAD;AAAgB,MAAA,WAAW,EAAE,KAAKX,WAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALlC,EAMKwC,WANL,CADJ,CADJ;AAYH;;AAlGoC;;AAoGzC,SAASE,kBAAT,CAA4BC,QAA5B,EAAsC;AAClC,SAAO;AACHpD,IAAAA,MAAM,EAAEC,kBAAkB,CAACD,MAAD,EAASoD,QAAT;AADvB,GAAP;AAGH;;AACD,eAAelD,OAAO,CAAC,IAAD,EAAOiD,kBAAP,CAAP,CAAkC7C,gBAAlC,CAAf","sourcesContent":["import React, { Component } from 'react';\r\nimport { Container } from 'react-bootstrap';\r\nimport CompanyDetails from './CompanyDetails'\r\nimport EditCompany from './EditCompany';\r\nimport axios from 'axios';\r\nimport { logout } from '../../../../actions/user.actions';\r\nimport { bindActionCreators } from 'redux'\r\nimport { connect } from 'react-redux';\r\nimport { history } from '../../../../history';\r\nimport Swal from \"sweetalert2\";\r\nimport '../../../../../node_modules/bootstrap/dist/css/bootstrap.min.css';\r\nimport '../../../SecondaryMenu.css'\r\nimport { BaseUrl } from '../../../../constants/BaseUrl'\r\n\r\nclass ActionsOnCompany extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            error: null,\r\n            response: {},\r\n            companyData: {},\r\n            isEditCompany: false\r\n        }\r\n        this.onFormSubmit = this.onFormSubmit.bind(this);\r\n    }\r\n\r\n    onFormSubmit(data) {\r\n\r\n        let token = localStorage.getItem('airlineCompany');\r\n        axios.put(BaseUrl.url + '/api/AirlineCompanyFacade/updateairlinecompany', data, { headers: { 'Authorization': 'Bearer ' + token } })\r\n            .then(result => {\r\n                let cdata = JSON.parse(result.config.data)\r\n                if (cdata.ID === data.ID) {\r\n                    Swal.fire({\r\n                        position: 'center',\r\n                        icon: 'success',\r\n                        title: `Airline Company with ID = ${cdata.ID} updated succsesfully`,\r\n                        showConfirmButton: true\r\n                    });\r\n                }\r\n                else {\r\n                    Swal.fire({\r\n                        icon: 'warning',\r\n                        title: \"Oops..\",\r\n                        text: result.data\r\n                    });\r\n                }\r\n                console.log(\"str token: \" + result.data)\r\n\r\n                localStorage.setItem('airlineCompany', result.data)\r\n                this.setState({\r\n                    response: result,\r\n                    isEditCompany: false\r\n                })\r\n\r\n            });\r\n    }\r\n\r\n    editCompany = companyId => {\r\n\r\n        let token = localStorage.getItem('airlineCompany');\r\n        axios.get(BaseUrl.url + '/api/AirlineCompanyFacade/getAirlineCompanyByAirlineId/' + companyId, { headers: { 'Authorization': 'Bearer ' + token } })\r\n            .then((result) => {\r\n                this.setState({\r\n                    isEditCompany: true,\r\n                    companyData: result.data\r\n                });\r\n            },\r\n                (error) => {\r\n                    this.setState({ error });\r\n                    if (error.message === 'Request failed with status code 401') {\r\n                        this.props.logout();\r\n                        Swal.fire({\r\n                            icon: 'warning',\r\n                            title: \"Oops..\",\r\n                            type: \"error\",\r\n                            text: \"Your token expires, please re-login!\",\r\n                        });\r\n                        history.push('/');\r\n                    }\r\n                }\r\n            )\r\n    }\r\n\r\n    onDetails(view) {\r\n        if (view === 'ListView')\r\n            this.setState({ isEditCompany: false });\r\n    }\r\n\r\n    render() {\r\n        console.log(\"isEditCompany: \" + this.state.isEditCompany)\r\n        let companyForm;\r\n        if (this.state.isEditCompany) {\r\n\r\n            companyForm = <EditCompany onFormSubmit={this.onFormSubmit} company={this.state.companyData} ListView={this.onDetails.bind(this, 'ListView')} />\r\n\r\n        }\r\n\r\n\r\n        return (\r\n            <div className=\"content1\">\r\n                <Container>\r\n                    <h1 style={{ textAlign: 'center'}}>Your Company Details</h1>\r\n                    <hr></hr>\r\n\r\n                    <br></br>\r\n                    {!this.state.isEditCompany && <CompanyDetails editCompany={this.editCompany} />}\r\n                    {companyForm}\r\n                </Container>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nfunction mapDispatchToProps(dispatch) {\r\n    return {\r\n        logout: bindActionCreators(logout, dispatch),\r\n    }\r\n}\r\nexport default connect(null, mapDispatchToProps)(ActionsOnCompany);\r\n"]},"metadata":{},"sourceType":"module"}