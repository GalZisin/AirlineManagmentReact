{"ast":null,"code":"var _jsxFileName = \"C:\\\\Projects\\\\react-flights\\\\src\\\\components\\\\SearchFlights.js\";\nimport React, { Component } from 'react';\nimport Button from '@material-ui/core/Button';\nimport DatePicker from \"react-datepicker\";\nimport axios from 'axios';\nimport { addPostAction } from '../actions/posts.action';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport \"../components/SearchFlightsBox.css\";\nimport moment from 'moment';\nimport { Container, Row, Col, Card } from 'react-bootstrap';\nimport { BaseUrl } from '../constants/BaseUrl';\nexport const FETCH_POSTS = 'FETCH_POSTS';\n\nclass SearchFlights extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getLocalCountry = () => {\n      axios.get('https://ipapi.co/json/').then(res => {\n        console.log(\"local country \" + JSON.stringify(res.data.country_name));\n        this.setState({\n          originCountry: res.data.country_name\n        });\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.getSelectedFlightFromCalendar = () => {\n      let selectedFlightData = localStorage.getItem('selectedFlightData');\n\n      if (selectedFlightData !== null) {\n        let selectedFlightData1 = JSON.parse(selectedFlightData);\n        console.log(\"selectedFlightData: \" + selectedFlightData);\n        let departureFlightFormat = moment(selectedFlightData1.departureFlight).format('DD/MM/YYYY');\n        let returnFlightFormat = moment(selectedFlightData1.returnFlight).format('DD/MM/YYYY');\n        var dateObj = new Date(selectedFlightData1.departureFlight);\n        var myDate = moment(dateObj);\n        console.log(\"myDate: \" + myDate);\n        this.setState({\n          departureDate: moment(departureFlightFormat, 'DD/MM/YYYY').toDate(),\n          returnDate: moment(returnFlightFormat, 'DD/MM/YYYY').toDate(),\n          destinationCountry: selectedFlightData1.destinationCountry,\n          company: selectedFlightData1.companyName,\n          originCountry: selectedFlightData1.originCountry\n        });\n        localStorage.removeItem('selectedFlightData');\n        setTimeout(() => {\n          this.onSearchClick();\n        }, 300);\n      }\n    };\n\n    this.onSearchClick = () => {\n      console.log(\"BaseUrl.url: \" + BaseUrl.url);\n      let dd = moment(this.state.departureDate).format('YYYY-MM-DD');\n      let rr = moment(this.state.returnDate).format('YYYY-MM-DD');\n      console.log(\"dd: \" + dd);\n      console.log(\"rr: \" + rr);\n      console.log(\"this.state.departureDate: \" + this.state.departureDate);\n      console.log(\"this.state.returnDate: \" + this.state.returnDate); // yyyy-MM-dd\n      // url = 'http://localhost:57588/api/AnonymousFacade/getflightsbyvacancy/search', {params: {flightId: this.state.flightId, originCountry: this.state.originCountry, destinationCountry: this.state.destinationCountry, airlineCompany: this.state.airlineCompany, date: this.state.date}}\n\n      let url = BaseUrl.url + `/api/AnonymousFacade/getflightsbyvacancy/search?flightNumber=${this.state.flightNumber}&originCountry=${this.state.originCountry}&destinationCountry=${this.state.destinationCountry}&company=${this.state.company}&departureDate=${dd}&returnDate=${rr}`;\n      console.log(\"url: \" + url);\n      axios.get(url).then(res => {\n        console.log(\"res= \" + JSON.stringify(res.data));\n        this.props.addPostAction(res.data);\n        let posts = JSON.stringify(res.data);\n\n        if (localStorage.getItem(\"posts\") !== null) {\n          localStorage.removeItem(\"posts\");\n        }\n\n        localStorage.setItem('posts', posts); // let posts2 = localStorage.getItem('posts');\n        // console.log(\"put posts to local storage: \" + posts2)\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n\n    this.onChangeFlightNumber = e => {\n      this.setState({\n        flightNumber: e.target.value\n      });\n    };\n\n    this.onChangeAirlineCompany = e => {\n      this.setState({\n        company: e.target.value\n      });\n    };\n\n    this.onChangeOriginCountry = e => {\n      console.log(\"e: \" + e.target.value);\n      this.setState({\n        originCountry: e.target.value\n      });\n\n      if (e.target.value !== '' && e !== null && e.target.value !== 'select') {\n        this.state.formErrors[\"oCountryErr\"] = \"\";\n      } else {\n        this.state.formErrors[\"oCountryErr\"] = \"Select origin country.\";\n      }\n    };\n\n    this.onChangeDestinationCountry = e => {\n      this.setState({\n        destinationCountry: e.target.value\n      });\n\n      if (e.target.value !== '' && e !== null && e.target.value !== 'select') {\n        this.state.formErrors[\"dCountryErr\"] = \"\";\n      } else {\n        this.state.formErrors[\"dCountryErr\"] = \"Select destination country.\";\n      }\n    };\n\n    this.onChangeDepartureDate = e => {\n      console.log(\"datepicker change: \" + e);\n      this.setState({\n        departureDate: e\n      });\n\n      if (e !== null && e !== '') {\n        this.state.formErrors[\"dodErr\"] = '';\n      } else {\n        this.state.formErrors[\"dodErr\"] = 'Date of departure required.';\n      }\n    };\n\n    this.onChangeReturnDate = e => {\n      this.setState({\n        returnDate: e\n      });\n\n      if (e !== null && e !== '') {\n        this.state.formErrors[\"dorErr\"] = '';\n      } else {\n        this.state.formErrors[\"dorErr\"] = \"Date of return required.\";\n        ;\n      }\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n\n      if (this.handleFormValidation()) {\n        this.onSearchClick();\n      }\n    };\n\n    this.state = {\n      flightId: '',\n      flightNumber: '',\n      originCountry: 'select',\n      destinationCountry: 'Select Destination Country',\n      company: '',\n      departureDate: '',\n      returnDate: '',\n      FlightsIds: [],\n      FlightNumbers: [],\n      FlightsCompanies: [],\n      FlightsOriginCountries: [],\n      FlightsDestinationCountries: [],\n      formErrors: {},\n      // formIsValid: false,\n      addPostAction: addPostAction\n    };\n  }\n\n  componentDidMount() {\n    window.scrollTo(0, 0);\n    this.getLocalCountry();\n    localStorage.removeItem('posts');\n    localStorage.removeItem('postId');\n    axios.get(BaseUrl.url + '/api/AnonymousFacade/getgrupedbyflightsbyvacancy').then(res => {\n      console.log(res);\n      this.setState({\n        FlightsIds: res.data.ids,\n        FlightNumbers: res.data.flightNumbers,\n        FlightsCompanies: res.data.companies,\n        FlightsOriginCountries: res.data.originCountries,\n        FlightsDestinationCountries: res.data.destinationCountries\n      });\n      console.log(JSON.stringify(res.data));\n      this.getSelectedFlightFromCalendar();\n    });\n  }\n\n  handleFormValidation() {\n    const {\n      originCountry,\n      destinationCountry,\n      departureDate,\n      returnDate\n    } = this.state;\n    let formErrors = {};\n    let formIsValid = true; //origin country   \n\n    if (originCountry === '' || originCountry === \"select\") {\n      formIsValid = false;\n      formErrors[\"oCountryErr\"] = \"Select origin country.\";\n    } //Destination country   \n\n\n    if (destinationCountry === '' || destinationCountry === \"Select Destination Country\" || destinationCountry === \"select\") {\n      formIsValid = false;\n      formErrors[\"dCountryErr\"] = \"Select destination country.\";\n    } //Departure Date    \n\n\n    if (!departureDate) {\n      formIsValid = false;\n      formErrors[\"dodErr\"] = \"Date of departure required.\";\n    } //Return Date    \n\n\n    if (!returnDate) {\n      formIsValid = false;\n      formErrors[\"dorErr\"] = \"Date of return required.\";\n    }\n\n    this.setState({\n      formErrors: formErrors\n    });\n    return formIsValid;\n  } // onChangeFlightId = (e) => {\n  //     this.setState({ flightId: e.target.value });\n  // };\n\n\n  render() {\n    const {\n      oCountryErr,\n      dCountryErr,\n      dorErr,\n      dodErr\n    } = this.state.formErrors;\n    return React.createElement(Container, {\n      style: {\n        marginTop: 150,\n        width: '100%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, React.createElement(Card, {\n      className: \"cardStyle1 box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }, React.createElement(Row, {\n      className: \"justify-content-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xs: 12,\n      sm: 3,\n      md: {\n        span: 5,\n        offset: 0\n      },\n      lg: {\n        span: 3,\n        offset: 0\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      style: {\n        marginTop: 15\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      name: \"flightNumber\",\n      onChange: this.onChangeFlightNumber,\n      value: this.state.flightNumber,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, \"Select Flight Number\"), this.state.FlightNumbers.map((e, key) => {\n      return React.createElement(\"option\", {\n        key: key,\n        value: e.flightNumber,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, e);\n    })))), React.createElement(Col, {\n      xs: 12,\n      sm: 3,\n      md: {\n        span: 5,\n        offset: 0\n      },\n      lg: {\n        span: 3,\n        offset: 0\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      style: {\n        marginTop: 15\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      name: \"company\",\n      onChange: this.onChangeAirlineCompany,\n      value: this.state.company,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      className: \"optionW\",\n      defaultValue: this.state.company,\n      value: \"select\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, \"Select Airline Company\"), this.state.FlightsCompanies.map((e, key) => {\n      return React.createElement(\"option\", {\n        key: key,\n        value: e.company,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, e);\n    })))), React.createElement(Col, {\n      xs: 12,\n      sm: 3,\n      md: {\n        span: 5,\n        offset: 0\n      },\n      lg: {\n        span: 3,\n        offset: 0\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      style: {\n        marginTop: 15\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      name: \"oCountry\",\n      onChange: this.onChangeOriginCountry,\n      value: this.state.originCountry,\n      className: oCountryErr ? ' showError' : '',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      defaultValue: this.state.originCountry,\n      value: \"select\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }, \"Select Origin Country\"), this.state.FlightsOriginCountries.map((e, key) => {\n      return React.createElement(\"option\", {\n        key: key,\n        value: e.originCountry,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }, e);\n    })), oCountryErr && React.createElement(\"div\", {\n      style: {\n        color: \"white\",\n        paddingBottom: 15\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273\n      },\n      __self: this\n    }, oCountryErr))), React.createElement(Col, {\n      xs: 12,\n      sm: 3,\n      md: {\n        span: 5,\n        offset: 0\n      },\n      lg: {\n        span: 3,\n        offset: 0\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      style: {\n        marginTop: 15\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      name: \"dCountry\",\n      onChange: this.onChangeDestinationCountry,\n      value: this.state.destinationCountry,\n      className: dCountryErr ? ' showError' : '',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      defaultValue: this.state.destinationCountry,\n      value: \"select\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285\n      },\n      __self: this\n    }, \"Select Destination Country\"), this.state.FlightsDestinationCountries.map((e, key) => {\n      return React.createElement(\"option\", {\n        key: key,\n        value: e.destinationCountry,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287\n        },\n        __self: this\n      }, e);\n    })), dCountryErr && React.createElement(\"div\", {\n      style: {\n        color: \"white\",\n        paddingBottom: 15\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291\n      },\n      __self: this\n    }, dCountryErr))), React.createElement(Col, {\n      xs: 12,\n      sm: 3,\n      md: {\n        span: 5,\n        offset: 0\n      },\n      lg: {\n        span: 3,\n        offset: 1\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        marginTop: 15\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296\n      },\n      __self: this\n    }, React.createElement(DatePicker, {\n      selected: this.state.departureDate,\n      placeholderText: \"Departure Date\",\n      showPopperArrow: false,\n      onChange: this.onChangeDepartureDate,\n      dateFormat: \"dd/MM/yyyy\",\n      minDate: new Date(),\n      isClearable: true,\n      showMonthDropdown: true,\n      id: this.state.date_picker_id,\n      className: dodErr ? 'showError' : '',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297\n      },\n      __self: this\n    }), dodErr && React.createElement(\"div\", {\n      style: {\n        color: \"white\",\n        paddingBottom: 10\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310\n      },\n      __self: this\n    }, dodErr))), React.createElement(Col, {\n      xs: 12,\n      sm: 3,\n      md: {\n        span: 5,\n        offset: 0\n      },\n      lg: {\n        span: 3,\n        offset: 0\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        marginTop: 15\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315\n      },\n      __self: this\n    }, React.createElement(DatePicker, {\n      selected: this.state.returnDate,\n      placeholderText: \"Return Date\",\n      showPopperArrow: false,\n      onChange: this.onChangeReturnDate,\n      dateFormat: \"dd/MM/yyyy\",\n      minDate: new Date(this.state.departureDate),\n      isClearable: true,\n      showMonthDropdown: true,\n      className: dorErr ? 'showError' : '',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316\n      },\n      __self: this\n    }), dorErr && React.createElement(\"div\", {\n      style: {\n        color: \"white\",\n        paddingBottom: 10\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328\n      },\n      __self: this\n    }, dorErr))), React.createElement(Col, {\n      xs: 12,\n      sm: 3,\n      md: {\n        span: 3,\n        offset: 0\n      },\n      lg: {\n        span: 2,\n        offset: 0\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332\n      },\n      __self: this\n    }, React.createElement(Button, {\n      style: {\n        padding: '12px 15px',\n        marginTop: 15\n      },\n      variant: \"contained\",\n      color: \"primary\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-search\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333\n      },\n      __self: this\n    })), \"\\xA0Search\"))))));\n  }\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  console.log(\"mapDispatchToProps searchFlights\");\n  return {\n    addPostAction: bindActionCreators(addPostAction, dispatch)\n  };\n}\n\nexport default connect(null, mapDispatchToProps)(SearchFlights);","map":{"version":3,"sources":["C:/Projects/react-flights/src/components/SearchFlights.js"],"names":["React","Component","Button","DatePicker","axios","addPostAction","connect","bindActionCreators","moment","Container","Row","Col","Card","BaseUrl","FETCH_POSTS","SearchFlights","constructor","props","getLocalCountry","get","then","res","console","log","JSON","stringify","data","country_name","setState","originCountry","catch","error","getSelectedFlightFromCalendar","selectedFlightData","localStorage","getItem","selectedFlightData1","parse","departureFlightFormat","departureFlight","format","returnFlightFormat","returnFlight","dateObj","Date","myDate","departureDate","toDate","returnDate","destinationCountry","company","companyName","removeItem","setTimeout","onSearchClick","url","dd","state","rr","flightNumber","posts","setItem","onChangeFlightNumber","e","target","value","onChangeAirlineCompany","onChangeOriginCountry","formErrors","onChangeDestinationCountry","onChangeDepartureDate","onChangeReturnDate","handleSubmit","event","preventDefault","handleFormValidation","flightId","FlightsIds","FlightNumbers","FlightsCompanies","FlightsOriginCountries","FlightsDestinationCountries","componentDidMount","window","scrollTo","ids","flightNumbers","companies","originCountries","destinationCountries","formIsValid","render","oCountryErr","dCountryErr","dorErr","dodErr","marginTop","width","span","offset","map","key","color","paddingBottom","date_picker_id","padding","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport Button from '@material-ui/core/Button';\r\nimport DatePicker from \"react-datepicker\";\r\nimport axios from 'axios';\r\nimport { addPostAction } from '../actions/posts.action';\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\nimport \"../components/SearchFlightsBox.css\";\r\nimport moment from 'moment';\r\nimport { Container, Row, Col, Card } from 'react-bootstrap';\r\nimport { BaseUrl } from '../constants/BaseUrl'\r\nexport const FETCH_POSTS = 'FETCH_POSTS'\r\n\r\nclass SearchFlights extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            flightId: '',\r\n            flightNumber: '',\r\n            originCountry: 'select',\r\n            destinationCountry: 'Select Destination Country',\r\n            company: '',\r\n            departureDate: '',\r\n            returnDate: '',\r\n            FlightsIds: [],\r\n            FlightNumbers: [],\r\n            FlightsCompanies: [],\r\n            FlightsOriginCountries: [],\r\n            FlightsDestinationCountries: [],\r\n            formErrors: {},\r\n            // formIsValid: false,\r\n\r\n            addPostAction: addPostAction\r\n        }\r\n    }\r\n    getLocalCountry = () => {\r\n        axios.get('https://ipapi.co/json/')\r\n            .then(res => {\r\n                console.log(\"local country \" + JSON.stringify(res.data.country_name));\r\n                this.setState({ originCountry: res.data.country_name })\r\n            })\r\n\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n    }\r\n\r\n    getSelectedFlightFromCalendar = () => {\r\n        let selectedFlightData = localStorage.getItem('selectedFlightData');\r\n\r\n        if (selectedFlightData !== null) {\r\n            let selectedFlightData1 = JSON.parse(selectedFlightData)\r\n            console.log(\"selectedFlightData: \" + selectedFlightData)\r\n            let departureFlightFormat = moment(selectedFlightData1.departureFlight).format('DD/MM/YYYY')\r\n            let returnFlightFormat = moment(selectedFlightData1.returnFlight).format('DD/MM/YYYY')\r\n\r\n\r\n            var dateObj = new Date(selectedFlightData1.departureFlight);\r\n            var myDate = moment(dateObj);\r\n            console.log(\"myDate: \" + myDate)\r\n            this.setState({\r\n                departureDate: moment(departureFlightFormat, 'DD/MM/YYYY').toDate(),\r\n                returnDate: moment(returnFlightFormat, 'DD/MM/YYYY').toDate(),\r\n                destinationCountry: selectedFlightData1.destinationCountry,\r\n                company: selectedFlightData1.companyName,\r\n                originCountry:selectedFlightData1.originCountry\r\n            })\r\n            localStorage.removeItem('selectedFlightData');\r\n            setTimeout(() => {\r\n                this.onSearchClick();\r\n            }, 300);\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.scrollTo(0, 0)\r\n        this.getLocalCountry();\r\n        localStorage.removeItem('posts');\r\n        localStorage.removeItem('postId');\r\n        axios.get(BaseUrl.url + '/api/AnonymousFacade/getgrupedbyflightsbyvacancy')\r\n            .then(res => {\r\n                console.log(res);\r\n                this.setState({\r\n                    FlightsIds: res.data.ids,\r\n                    FlightNumbers: res.data.flightNumbers,\r\n                    FlightsCompanies: res.data.companies,\r\n                    FlightsOriginCountries: res.data.originCountries,\r\n                    FlightsDestinationCountries: res.data.destinationCountries\r\n                });\r\n                console.log(JSON.stringify(res.data));\r\n                this.getSelectedFlightFromCalendar();\r\n\r\n            });\r\n\r\n    }\r\n\r\n    onSearchClick = () => {\r\n        console.log(\"BaseUrl.url: \" + BaseUrl.url)\r\n        \r\n        let dd = moment(this.state.departureDate).format('YYYY-MM-DD');\r\n        let rr = moment(this.state.returnDate).format('YYYY-MM-DD');\r\n        console.log(\"dd: \" + dd)\r\n        console.log(\"rr: \" + rr)\r\n        console.log(\"this.state.departureDate: \" + this.state.departureDate)\r\n        console.log(\"this.state.returnDate: \" + this.state.returnDate)\r\n        // yyyy-MM-dd\r\n        // url = 'http://localhost:57588/api/AnonymousFacade/getflightsbyvacancy/search', {params: {flightId: this.state.flightId, originCountry: this.state.originCountry, destinationCountry: this.state.destinationCountry, airlineCompany: this.state.airlineCompany, date: this.state.date}}\r\n        let url = BaseUrl.url + `/api/AnonymousFacade/getflightsbyvacancy/search?flightNumber=${this.state.flightNumber}&originCountry=${this.state.originCountry}&destinationCountry=${this.state.destinationCountry}&company=${this.state.company}&departureDate=${dd}&returnDate=${rr}`;\r\n        console.log(\"url: \" + url)\r\n        axios.get(url)\r\n            .then(res => {\r\n                console.log(\"res= \" + JSON.stringify(res.data));\r\n\r\n                this.props.addPostAction(res.data);\r\n                let posts = JSON.stringify(res.data);\r\n\r\n                if (localStorage.getItem(\"posts\") !== null) {\r\n                    localStorage.removeItem(\"posts\")\r\n                }\r\n                localStorage.setItem('posts', posts);\r\n                // let posts2 = localStorage.getItem('posts');\r\n                // console.log(\"put posts to local storage: \" + posts2)\r\n            })\r\n\r\n            .catch(error => {\r\n                console.log(error)\r\n            })\r\n    }\r\n\r\n    handleFormValidation() {\r\n        const { originCountry, destinationCountry, departureDate, returnDate } = this.state;\r\n        let formErrors = {};\r\n        let formIsValid = true;\r\n\r\n\r\n        //origin country   \r\n        if (originCountry === '' || originCountry === \"select\") {\r\n            formIsValid = false;\r\n            formErrors[\"oCountryErr\"] = \"Select origin country.\";\r\n        }\r\n\r\n        //Destination country   \r\n        if (destinationCountry === '' || destinationCountry === \"Select Destination Country\" || destinationCountry === \"select\") {\r\n            formIsValid = false;\r\n            formErrors[\"dCountryErr\"] = \"Select destination country.\";\r\n        }\r\n\r\n        //Departure Date    \r\n        if (!departureDate) {\r\n            formIsValid = false;\r\n            formErrors[\"dodErr\"] = \"Date of departure required.\";\r\n        }\r\n        //Return Date    \r\n        if (!returnDate) {\r\n            formIsValid = false;\r\n            formErrors[\"dorErr\"] = \"Date of return required.\";\r\n        }\r\n\r\n        this.setState({ formErrors: formErrors });\r\n        return formIsValid;\r\n    }\r\n\r\n\r\n    // onChangeFlightId = (e) => {\r\n    //     this.setState({ flightId: e.target.value });\r\n    // };\r\n    onChangeFlightNumber = (e) => {\r\n        this.setState({ flightNumber: e.target.value });\r\n    };\r\n    onChangeAirlineCompany = (e) => {\r\n        this.setState({ company: e.target.value });\r\n    };\r\n    onChangeOriginCountry = (e) => {\r\n        console.log(\"e: \" + e.target.value)\r\n        this.setState({ originCountry: e.target.value });\r\n        if (e.target.value !== '' && e !== null && e.target.value !== 'select') {\r\n            this.state.formErrors[\"oCountryErr\"] = \"\";\r\n        }\r\n        else {\r\n            this.state.formErrors[\"oCountryErr\"] = \"Select origin country.\";\r\n        }\r\n    };\r\n    onChangeDestinationCountry = (e) => {\r\n        this.setState({ destinationCountry: e.target.value });\r\n        if (e.target.value !== '' && e !== null && e.target.value !== 'select') {\r\n            this.state.formErrors[\"dCountryErr\"] = \"\";\r\n        }\r\n        else {\r\n            this.state.formErrors[\"dCountryErr\"] = \"Select destination country.\";\r\n        }\r\n    };\r\n\r\n    onChangeDepartureDate = (e) => {\r\n        console.log(\"datepicker change: \" + e)\r\n        this.setState({ departureDate: e });\r\n        if (e !== null && e !== '') {\r\n\r\n            this.state.formErrors[\"dodErr\"] = '';\r\n        }\r\n        else {\r\n            this.state.formErrors[\"dodErr\"] = 'Date of departure required.';\r\n        }\r\n    };\r\n    onChangeReturnDate = (e) => {\r\n        this.setState({ returnDate: e });\r\n        if (e !== null && e !== '') {\r\n\r\n            this.state.formErrors[\"dorErr\"] = '';\r\n        }\r\n        else {\r\n            this.state.formErrors[\"dorErr\"] = \"Date of return required.\";;\r\n        }\r\n    };\r\n\r\n    handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        if (this.handleFormValidation()) {\r\n            this.onSearchClick();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { oCountryErr, dCountryErr, dorErr, dodErr } = this.state.formErrors;\r\n        return (\r\n            <Container style={{ marginTop: 150, width: '100%' }} >\r\n                <form onSubmit={this.handleSubmit}>\r\n                    <Card className=\"cardStyle1 box\">\r\n                        <Row className=\"justify-content-center\">\r\n                            <Col xs={12} sm={3} md={{ span: 5, offset: 0 }} lg={{ span: 3, offset: 0 }}>\r\n                                <div className=\"form-group\" style={{ marginTop: 15 }}>\r\n                                    <select\r\n                                        name=\"flightNumber\"\r\n                                        onChange={this.onChangeFlightNumber}\r\n                                        value={this.state.flightNumber}\r\n                                    >\r\n                                        <option value=\"\">Select Flight Number</option>\r\n                                        {this.state.FlightNumbers.map((e, key) => {\r\n                                            return <option key={key} value={e.flightNumber}>{e}</option>;\r\n                                        })}\r\n                                    </select>\r\n                                </div>\r\n                            </Col>\r\n                            <Col xs={12} sm={3} md={{ span: 5, offset: 0 }} lg={{ span: 3, offset: 0 }}>\r\n                                <div className=\"form-group\" style={{ marginTop: 15 }}>\r\n                                    <select\r\n\r\n                                        name=\"company\"\r\n                                        onChange={this.onChangeAirlineCompany}\r\n                                        value={this.state.company}\r\n                                    >\r\n                                        <option className=\"optionW\" defaultValue={this.state.company} value=\"select\">Select Airline Company</option>\r\n                                        {this.state.FlightsCompanies.map((e, key) => {\r\n                                            return <option key={key} value={e.company}>{e}</option>;\r\n                                        })}\r\n                                    </select>\r\n\r\n                                </div>\r\n                            </Col>\r\n                            <Col xs={12} sm={3} md={{ span: 5, offset: 0 }} lg={{ span: 3, offset: 0 }}>\r\n                                <div className=\"form-group\" style={{ marginTop: 15 }}>\r\n                                    <select\r\n                                        name=\"oCountry\"\r\n                                        onChange={this.onChangeOriginCountry}\r\n                                        value={this.state.originCountry}\r\n                                        className={oCountryErr ? ' showError' : ''}\r\n                                    >\r\n                                        <option defaultValue={this.state.originCountry} value=\"select\">Select Origin Country</option>\r\n                                        {this.state.FlightsOriginCountries.map((e, key) => {\r\n                                            return <option key={key} value={e.originCountry}>{e}</option>;\r\n                                        })}\r\n                                    </select>\r\n                                    {oCountryErr &&\r\n                                        <div style={{ color: \"white\", paddingBottom: 15 }}>{oCountryErr}</div>\r\n                                    }\r\n                                </div>\r\n                            </Col>\r\n                            <Col xs={12} sm={3} md={{ span: 5, offset: 0 }} lg={{ span: 3, offset: 0 }}>\r\n                                <div className=\"form-group\" style={{ marginTop: 15 }}>\r\n                                    <select\r\n                                        name=\"dCountry\"\r\n                                        onChange={this.onChangeDestinationCountry}\r\n                                        value={this.state.destinationCountry}\r\n                                        className={dCountryErr ? ' showError' : ''}\r\n                                    >\r\n                                        <option defaultValue={this.state.destinationCountry} value=\"select\">Select Destination Country</option>\r\n                                        {this.state.FlightsDestinationCountries.map((e, key) => {\r\n                                            return <option key={key} value={e.destinationCountry}>{e}</option>;\r\n                                        })}\r\n                                    </select>\r\n                                    {dCountryErr &&\r\n                                        <div style={{ color: \"white\", paddingBottom: 15 }}>{dCountryErr}</div>\r\n                                    }\r\n                                </div>\r\n                            </Col>\r\n                            <Col xs={12} sm={3} md={{ span: 5, offset: 0 }} lg={{ span: 3, offset: 1 }}>\r\n                                <div style={{ marginTop: 15 }}>\r\n                                    <DatePicker\r\n                                        selected={this.state.departureDate}\r\n                                        placeholderText=\"Departure Date\"\r\n                                        showPopperArrow={false}\r\n                                        onChange={this.onChangeDepartureDate}\r\n                                        dateFormat='dd/MM/yyyy'\r\n                                        minDate={new Date()}\r\n                                        isClearable\r\n                                        showMonthDropdown\r\n                                        id={this.state.date_picker_id}\r\n                                        className={dodErr ? 'showError' : ''}\r\n                                    />\r\n                                    {dodErr &&\r\n                                        <div style={{ color: \"white\", paddingBottom: 10 }}>{dodErr}</div>\r\n                                    }\r\n                                </div>\r\n                            </Col>\r\n                            <Col xs={12} sm={3} md={{ span: 5, offset: 0 }} lg={{ span: 3, offset: 0 }}>\r\n                                <div style={{ marginTop: 15 }}>\r\n                                    <DatePicker\r\n                                        selected={this.state.returnDate}\r\n                                        placeholderText=\"Return Date\"\r\n                                        showPopperArrow={false}\r\n                                        onChange={this.onChangeReturnDate}\r\n                                        dateFormat='dd/MM/yyyy'\r\n                                        minDate={new Date(this.state.departureDate)}\r\n                                        isClearable\r\n                                        showMonthDropdown\r\n                                        className={dorErr ? 'showError' : ''}\r\n                                    />\r\n                                    {dorErr &&\r\n                                        <div style={{ color: \"white\", paddingBottom: 10 }}>{dorErr}</div>\r\n                                    }\r\n                                </div>\r\n                            </Col>\r\n                            <Col xs={12} sm={3} md={{ span: 3, offset: 0 }} lg={{ span: 2, offset: 0 }}>\r\n                                <Button style={{ padding: '12px 15px', marginTop: 15 }} variant=\"contained\" color=\"primary\" type=\"submit\"><span><i className=\"fas fa-search\"></i></span>&nbsp;Search</Button>\r\n                            </Col>\r\n                        </Row>\r\n                    </Card>\r\n                </form>\r\n            </Container>\r\n        );\r\n\r\n\r\n    }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n    console.log(\"mapDispatchToProps searchFlights\")\r\n    return {\r\n        addPostAction: bindActionCreators(addPostAction, dispatch)\r\n    }\r\n}\r\nexport default connect(null, mapDispatchToProps)(SearchFlights);"]},"metadata":{},"sourceType":"module"}